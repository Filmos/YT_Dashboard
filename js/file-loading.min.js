/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

var fullData;!function(l){"use strict";var i="";l(document).on("change",".btn-file :file",function(t){i=t.target.files[0];var e=l(this).parents(".input-group").find(":text");i?(e.val(i.name),l(this).parents(".input-group").find("+ .alert").hide()):e.val("")}),l(document).on("click",".btn-takeout-import",function(t){var e=!1;if(l("#datasetName").val()||(e=!0,l("#datasetName + .alert").show()),i||(e=!0,l("#takeout-file-selector + .alert").html("Select a file").show()),!e)try{var a=new FileReader;a.onload=function(t){!function(t){try{var e=JSON.parse(t);if(0==(e=e.filter(function(t){return t.time&&t.titleUrl&&-1!=t.titleUrl.indexOf("watch?v=")})).length)throw"Dataset is empty or invalid";var a={};e=e.map(function(t){var e={id:t.titleUrl.slice(t.titleUrl.indexOf("watch?v=")+8),time:t.time};return a[e.id]=!0,e});var r=Object.keys(a).slice(0,140);i="",l("#takeout-file-selector").find(":text").val(""),l("#datasetName").val(""),l("#importDatasetModal").modal("hide");var o=function(t){t=Math.floor(100*t),l("#importProgressModal .progress-bar").css("width",t+"%").attr("aria-valuenow",t).html(t+"%")};o(0),l("#importProgressModal").modal({backdrop:"static",keyboard:!1}),getDataFromAPI(r,function(t){l("#importProgressModal").modal("hide"),console.log(t)},function(){},o)}catch(t){l("#takeout-file-selector + .alert").html("Invalid file").show(),console.error(t)}}(t.target.result)},a.readAsText(i)}catch(t){l("#takeout-file-selector + .alert").html("Couldn't load file").show(),console.error(t)}}),l(document).on("change keyup paste","#datasetName",function(t){l(this).find("+ .alert").hide()}),l("#datasetName + .alert").hide(),l("#takeout-file-selector + .alert").hide()}(jQuery);